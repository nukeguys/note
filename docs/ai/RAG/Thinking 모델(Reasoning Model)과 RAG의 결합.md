# Thinking 모델(Reasoning Model)과 RAG의 결합

## 1. RAG 아키텍처에서의 위치

Thinking 모델은 주로 **'생성(Generation)'** 단계에 위치하지만, [RAG](<RAG%20(Retrieval-Augmented%20Generation).md>) 프로세스 전체를 지휘하는 **'추론 엔진'** 역할을 겸합니다.

- **기존 LLM:** 검색된 정보를 바탕으로 즉시 답변 생성 (반사적 답변).
- **Thinking 모델:** 답변 전 "어떻게 검색하고 어떤 정보를 조합해야 최적일까?"를 스스로 생각(Chain of Thought)한 뒤 답변.

## 2. Thinking 모델이 RAG에서 하는 3가지 핵심 역할

### ① 동적 쿼리 계획 (Dynamic Query Planning)

- **이론:** 사용자의 복잡한 질문을 받았을 때, 필요한 정보의 종류와 검색 순서를 스스로 설계합니다.
- **차별점:** 기존의 고정된 '질문 확장' 도구를 대신하여, 상황에 맞는 최적의 검색 키워드를 추론해냅니다.

### ② 다단계 추론 및 검증 (Multi-step Reasoning & Verification)

- **이론:** 검색된 정보들 사이에 모순이 없는지, 정보가 부족하지 않은지 스스로 검토합니다.
- **차별점:** 정보가 부족하다고 판단되면 시스템에 "추가 검색이 필요함"이라는 신호를 보내는 '에이전틱(Agentic) RAG' 구현이 쉬워집니다.

### ③ 고도의 문맥 통합 (Advanced Context Synthesis)

- **이론:** 흩어져 있는 정보 조각들을 연결하여 복잡한 논리 구조를 가진 답변을 생성합니다.
- **차별점:** 단순 요약을 넘어 "A와 B의 데이터를 볼 때 C라는 결론이 도출된다"는 식의 깊이 있는 통찰을 제공합니다.

## 3. Thinking 모델 기반 에이전트의 워크플로우

1. **내부 추론 (Thinking):** 질문 분석 -> "어떤 지식이 필요한가?" 계획 수립.
2. **검색 수행 (Retrieval):** 벡터 DB 및 외부 API 호출.
3. **비판적 검토:** 검색 결과가 질문에 충분한지 판단. (부족하면 재검색)
4. **최종 생성:** 사고 과정을 거쳐 정제된 답변 출력.

## 4. 관련 기술 및 트렌드

| 기술 명칭                  | 특징                       | RAG에서의 이점                                |
| :------------------------- | :------------------------- | :-------------------------------------------- |
| **Chain of Thought (CoT)** | 사고의 단계를 밟아감       | 복잡한 문서들 사이의 논리적 연결성 파악       |
| **Agentic RAG**            | 스스로 도구(Tool)를 사용함 | DB 검색뿐 아니라 웹 검색, 코드 실행 등을 병행 |
| **Self-Reflection**        | 자신의 답변을 스스로 교정  | 환각(Hallucination) 현상을 획기적으로 줄임    |
